# 字符串数据类型

## 支持的API
| Redis API   |  用途                                                         |
| :---------- |  :----------------------------------------------------------- |
| SETNX                        | 将 key 的值设为 value ，当且仅当 key 不存在                  |
| SETEX                        | 将值 value 关联到 key ，并将 key 的生存时间设为 seconds (以秒为单位) |
| SET                          | 将字符串值 value 关联到 key                                  |
| GET                         | 返回 key 所关联的字符串值                                    |
| MSET                         | 同时设置一个或多个 key-value 对                              |
| MGET                         | 返回所有(一个或多个)给定 key 的值                            |
                          |





## 冲突解决

### 正常同步的场景

Data Type: Strings
Use Case: Common SETs 
Conflict Resolution: None

| Time | InstanceA            | InstanceB            |
| :--- | :------------------- | :------------------- |
| t1   | SET ‘key1’ ‘val1’    |                      |
| t2   | sync                 | sync                 |
| t3   | GET ‘key1’ => ‘val1’ | GET ‘key1’ => ‘val1’ |
| t4   |                      | SET ‘key1’ ‘val2’    |
| t5   | sync                 | sync                 |
| t6   | GET ‘key1’ => ‘val2’ | GET ‘key1’ => ‘val2’ |



### 并发冲突的场景

Data Type: Strings
Use Case: Concurrent SETs 
Conflict Resolution: Last Write Wins (LWW)

产生并发冲突时, 我们采用了 `LWW(Last Write Wins)`的策略 – 既在对同一个`key`进行`SET`操作时, 采用 timestamp 比较大的那次操作作为最终结果

| Time | InstanceA            | InstanceB            |
| :--- | :------------------- | :------------------- |
| t1   | SET ‘key1’ ‘val1’    |                      |
| t2   |                      | SET ‘key1’ ‘val2’    |
| t3   | sync                 | sync                 |
| t4   | GET ‘key1’ => ‘val2’ | GET ‘key1’ => ‘val2’ |
